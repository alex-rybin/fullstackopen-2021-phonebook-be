(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),o=t(3),a=t(1),u=t(0),i=function(e){var n=e.value,t=e.onChange;return Object(u.jsxs)(u.Fragment,{children:["filter shown with ",Object(u.jsx)("input",{onChange:function(e){return t(e.target.value)},value:n})]})},s=function(e){var n=e.name,t=e.number,c=e.onNameChange,r=e.onNumberChange,o=e.onSubmit;return Object(u.jsxs)("form",{onSubmit:o,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{onChange:function(e){return c(e.target.value)},value:n})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{onChange:function(e){return r(e.target.value)},value:t})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.name,t=e.number,c=e.onDeleteClick;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("span",{children:[n," ",t]},n),Object(u.jsx)("button",{onClick:c,children:"delete"}),Object(u.jsx)("br",{})]})},d=function(e){var n=e.persons,t=e.filter,c=e.onDeleteClick;return Object(u.jsx)(u.Fragment,{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(u.jsx)(b,{name:e.name,number:e.number,onDeleteClick:function(){return c(e.id)}},e.id)}))})},j=t(4),l=t.n(j),f="/persons/",h={getAll:function(){return l.a.get(f).then((function(e){return e.data}))},create:function(e){return l.a.post(f,e).then((function(e){return e.data}))},deleteContact:function(e){return l.a.delete("".concat(f).concat(e,"/")).then((function(e){return e.data}))},update:function(e,n){return l.a.put("".concat(f).concat(e,"/"),n).then((function(e){return e.data}))}},m=function(e){var n=e.message,t=e.type;return n&&Object(u.jsx)("div",{className:t,children:n})},O=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),b=Object(o.a)(r,2),j=b[0],l=b[1],f=Object(a.useState)(""),O=Object(o.a)(f,2),p=O[0],v=O[1],x=Object(a.useState)(""),g=Object(o.a)(x,2),C=g[0],w=g[1],k=Object(a.useState)(null),S=Object(o.a)(k,2),D=S[0],y=S[1],N=Object(a.useState)("success"),A=Object(o.a)(N,2),F=A[0],E=A[1];Object(a.useEffect)((function(){h.getAll().then((function(e){c(e)}))}),[]);var I=function(e,n){E(n),y(e),setTimeout((function(){return y(null)}),5e3)};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(m,{message:D,type:F}),Object(u.jsx)(i,{value:C,onChange:w}),Object(u.jsx)("h2",{children:"Add new"}),Object(u.jsx)(s,{name:j,number:p,onNameChange:l,onNumberChange:v,onSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===j}));n?window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?"))&&h.update(n.id,{name:j,number:p}).then((function(e){c(t.filter((function(e){return e.id!==n.id})).concat(e)),I("Updated phone number for ".concat(j),"success"),l(""),v("")})).catch((function(e){I(e.response.data.error,"error")})):h.create({name:j,number:p}).then((function(e){c(t.concat(e)),I("Added ".concat(j),"success"),l(""),v("")})).catch((function(e){I(e.response.data.error,"error")}))}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(d,{filter:C,persons:t,onDeleteClick:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Delete ".concat(n,"?"))&&h.deleteContact(e).then((function(){c(t.filter((function(n){return n.id!==e}))),I("Deleted ".concat(n),"success")})).catch((function(){I("Information of ".concat(n," has already been removed from server"),"error")}))}})]})};t(38);r.a.render(Object(u.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.bceafa5c.chunk.js.map